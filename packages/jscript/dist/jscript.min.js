class JLanguage{constructor(){$(document).on("click",".dropdown-language",t=>{t.preventDefault(),this.change(t.target.text.trim())})}cache(t){return JSON.parse(sessionStorage.getItem(t))||{}}translate(t){var e=this.cache($_.document.lang);return e[t]?e[t]:t}translate_route(t){Object.prototype.getKey=function(t){for(let e in this)if(this[e]==t)return e;return""};var e=e=>this.cache(t.language)[e]||this.cache($_.document.lang).getKey(e),a=t.path.split("/"),r=a.length;if(a[1]){t.path="";for(let n=0;n<=r;n++)a[n]&&(t.path+="/"+(e(a[n])||a[n]));return t.path}return e(t.path)||t.path}redirect(t){window.location.href=t}selectLanguage(t,e){$_.http.request("/?language="+t,(t,a)=>(t&&console.log(t),e()))}change(t){var e=JSON.parse(sessionStorage.getItem(t))||null;"en"!==t&&null===e?this.selectLanguage(t,()=>{$_.http.request("/?lang="+t,(e,a)=>{e&&console.log(e),sessionStorage.setItem(t,JSON.stringify(a.data)),this.redirect("/")})}):this.selectLanguage(t,()=>this.redirect("/"))}}class JDatagrid{constructor(t,e,a){var r=document.getElementById(t.split("#")[1]),i=document.createElement("div");this.tabulator=null,i.setAttribute("class","mt-4"),i.setAttribute("id",r.getAttribute("id")+"_tabulator"),r.appendChild(i),r.getData=()=>{$_.http.request(r.getAttribute("action"),(a,r)=>{this.table(t+"_tabulator",e,r.data)})},r.getData(),r.getElementsByTagName("select")[0].addEventListener("change",t=>{a(t.target.value)}),r.addEventListener("reset",()=>{this.tabulator.clearFilter(),r.getData()}),r.addEventListener("submit",a=>{$_.http.request(r.getAttribute("action"),"term="+a.target.term.value,(a,r)=>{a||this.table(t+"_tabulator",e,r.data)}),a.preventDefault()})}table(t,e,a){return this.tabulator=new Tabulator(t,{columns:e,data:a,autoColumns:!1,layout:"fitColumns",pagination:"local",paginationSize:10,locale:!1,langs:this.language()}),this.tabulator}filter(...t){this.tabulator.setFilter(...t)}language(){return{default:{ajax:{loading:translate("Loading..."),error:translate("Error")},groups:{item:translate("Item"),items:translate("Items")},pagination:{page_size:translate("Page size"),first:translate("First"),first_title:translate("First page"),last:translate("Last"),last_title:translate("Last page"),prev:translate("Previous"),prev_title:translate("Previous page"),next:translate("Next"),next_title:translate("Next page")},headerFilters:{default:translate("Filter column"),columns:{name:translate("Filter name")}}}}}}class JValidation{setInputFilter(t,e,i){["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop","focusout"].forEach(function(s){t.addEventListener(s,function(t){e(this.value)?(["keydown","mousedown","focusout"].indexOf(t.type)>=0&&(this.classList.remove("input-error"),this.setCustomValidity("")),this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.classList.add("input-error"),this.setCustomValidity(i),this.reportValidity(),this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""})})}}class JEvent{on(n,o,c){$(document).on(n,o,function(n){c(n)})}}class JDialog{alert(a,e=null){let c={centerVertical:!0,closeButton:!1,message:a,buttons:{ok:{label:this.icon("close")+" "+$_.language.translate("Close"),className:"btn-secondary"}}};null!==e&&(c.callback=a=>e(a)),bootbox.alert(c)}confirm(a,e){bootbox.confirm({centerVertical:!0,closeButton:!1,message:a,buttons:{cancel:{label:this.icon("close")+" "+$_.language.translate("Cancel"),className:"btn-danger"},confirm:{label:this.icon("check")+" "+$_.language.translate("Confirm"),className:"btn-success"}},callback:a=>e(a)})}icon(a,e=null){return`<i class="${({success:"fas fa-check-circle text-success",info:"fas fa-info-circle text-info",warning:"fa fa-exclamation-triangle text-warning",danger:"fas fa-times-circle text-danger",close:"fa fa-times-circle",plus:"fa fa-plus",edit:"fa fa-edit",trash:"fa fa-trash",check:"fa fa-check",search:"fa fa-search",square:"fas fa-square","check-square":"fas fa-check-square"})[a]}${e=e?" fa-"+e:""} me-2"></i>`}}class JScript{constructor(){window.$_=[],window.global=window,global.type_of=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),window.module||(global.module={},module.exports=null)}init(){$_.document=new JDocument,$_.http=new JHttp,$_.file=new JFile,$_.language=new JLanguage,$_.element=new JElement,$_.event=new JEvent,$_.time=new JTime,$_.component=new JComponent,$_.document.ready(this.main)}main(){global.translate=e=>$_.language.translate(e),$_.component.navbar(),$("[onload]").trigger("onload")}}class JBox{constructor(s){return this.box(s[0],s[1],s[2],s[3],s[4])}box(s,t="primary",e=!1,a="",o="#box"){$_.element.id(o.split("#")[1]).innerHTML='<div class="alert alert-'+t+" alert-dismissible fade show m-0 "+a+'" role="alert"><span class="text-wrap">'+s+"</span>"+(e?'<button type="button" class="btn-close outline-none box-shadow-none" data-bs-dismiss="alert"></button>':"")+"</div>"}}class JTime{sleep(e){for(e=new Date().getTime()+1e3*e;new Date().getTime()<e;);}}class JHttp{constructor(){var t=this;$(document).on("click","a.ajax",function(e){if($(this).attr("data-ajax-href"))return $_.http.ajax($(this).attr("href"),$(this).attr("data-ajax-href")),!1;e.target.href&&$_.http.request(e.target.href,(e,a)=>{t.html(a.data),$_.document.resizeScreen()}),e.preventDefault()}),$(document).on("submit","form.ajax",function(e){$_.http.request(e.target.action,$(this).serialize(),(e,a)=>{$(this).attr("data-ajax-return")?(a.reset=()=>$(this).trigger("reset"),window[$(this).attr("data-ajax-return")](e,a)):(t.html(a.data),$_.document.resizeScreen())}),e.preventDefault()})}html(t){$_.document.html(t),$("body").html($("body").html()),$JScript.main()}ajax(t,e){$_.http.request(e,(a,r)=>(window.history.pushState({},null,t||e),this.html(r.data),$_.document.resizeScreen(),!1))}get(t,e=null){var a={};try{let r=new URL(t);a.baseURL=r.protocol+"//"+r.host,t=t.split(a.baseURL)[1]}catch(s){}return axios.create(a).get(t).then(t=>e?e(!1,t.data):t.data).catch(t=>e?e(!0,t.response):t.response)}request(t,e=null,a=null){let r="get",s={};"function"===type_of(e)?(a=e,e=null):"string"===type_of(e)&&(r="post"),axios.defaults.headers.common.Ajax=!0,axios[r](t,e).then(t=>{s=t}).catch(t=>{s=t.response,t=!0}).finally(()=>{a(!1,s)})}}class JDocument{constructor(){return this.doc=document,this.doc.lang=this.doc.documentElement.lang,this.doc.ready=e=>this.ready(e),this.doc.on=(e,t)=>this.on(e,t),this.doc.html=e=>this.html(e),this.doc.height=()=>this.height(),this.doc.width=()=>this.width(),this.doc.resizeScreen=()=>this.resizeScreen(),this.doc.windowResizeEvent=e=>this.windowResizeEvent(e),this.doc.error=e=>this.error(e),this.doc}ready(e){this.doc.addEventListener("DOMContentLoaded",function(t){e(t)})}on(e,t){this.doc.addEventListener(e,function(e){t(e)})}html(e){this.doc.documentElement.innerHTML=e}height(){return window.innerHeight||this.doc.documentElement.clientHeight||this.doc.body.clientHeight||this.doc.body.offsetHeight}width(){return window.innerWidth||this.doc.documentElement.clientWidth||this.doc.body.clientWidth||this.doc.body.offsetWidth}resizeScreen(){var e=$(document).height();$("main").css("height",parseInt(e-($("body").height()-($("main").height()-115))/2)),$(".centralize").css("margin-top",parseInt((e-($(".centralize").height()+115))/2))}windowResizeEvent(e){var t=!1;$(window).on("resize",function(e){t||$(window).trigger("resizestart"),clearTimeout(t),t=setTimeout(function(){t=!1,$(window).trigger("resizeend")},1)}).on("resizestart",function(){}).on("resizeend",function(){e()})}error(e){window.onerror=function(t,i,n,o,h){let r={};return r.message=t,r.file=i,r.line=n,r.col=o,r.error=h,e(r)}}}class JFile{include(e){if("string"===type_of(e)){var t=document.createElement("script");t.type="text/javascript",t.src=e,t.async=!0,document.getElementsByTagName("head")[0].appendChild(t)}else"array"===type_of(e)&&this.includeMulti(e)}includeMulti(e){var t=[],a="";$("head script").each(function(e){t[e]=$(this).attr("src")}),$(e).each((e,i)=>{a=i,$(t).each((e,t)=>{if(i===t)return a="",!1}),""!==a&&this.include(a)})}}class JElement{id(e){return document.getElementById(e)}resize(e){var t=e.contentWindow.document;e.style.height=t.documentElement.scrollHeight+"px"}}class JNavbar{constructor(){$(".navbar")[0]&&(this.navbar=Math.round($(".navbar").outerHeight(!0)),$(".navbar.fixed-top")[0]&&$("body").css("padding-top",this.navbar+"px"),$_.document.on("click",function(a){"true"==$(".navbar .navbar-toggler").attr("aria-expanded")&&0===$(a.target).closest(".navbar").length&&$('button[aria-expanded="true"]').click()}),$("nav.navbar-effect")[0]&&($(".custom-toggler").on("click",a=>this.effect(a)),window.addEventListener("scroll",a=>this.effect(a))))}effect(a){var r=window.scrollY>this.navbar,e=$("#navbarSupportedContent"),n=$("nav.navbar-dark"),t=$("nav.navbar-light");n[0]&&r||e.is(":visible")&&992>e.width()&&n[0]?($(".light-brand").addClass("d-none"),n.addClass("navbar-light"),n.addClass("bg-white"),n.removeClass("bg-dark-5"),n.removeClass("navbar-dark"),$(".dark-brand").removeClass("d-none")):(!r&&!e.is(":visible")||!r&&"click"===a.type||!r&&e.width()>=992)&&($(".dark-brand").addClass("d-none"),t.addClass("navbar-dark"),t.addClass("bg-dark-5"),t.removeClass("bg-white"),t.removeClass("navbar-light"),$(".light-brand").removeClass("d-none"))}}class JComponent{constructor(){this.box=(...i)=>new JBox(i),this.dialog=new JDialog,this.navbar=()=>new JNavbar,this.icon=i=>this.dialog.icon(i),this.datagrid=(...i)=>new JDatagrid(i)}}